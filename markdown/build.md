# 构建

## 脚本

使用 `file(GLOB_RECURSE ...)` 获取文件列表的方法不值得采纳，因为 CMake 是一个构建系统生成器，而不是构建系统。

`GLOB_RECURSE` 是在构建的时候生成文件列表，那么 CMake 在生成构建系统的时候就没有办法知道文件列表，也就没有办法利用文件信息

比如我觉得是因为他没有办法利用时间戳，才导致每次都要重新构建

所以想要增量构建，还是直接在 CMakeLists 里面直接给出所有文件的列表更稳妥

我不想手动维护所有文件列表，所以写了一个 python 脚本，递归获取指定文件夹下以特定后缀为结尾的所有文件

然后再用 cmake-format 来格式化

我在想……为什么不直接写到 bat 里面

做一个 CMakeLists.template 获取文件列表，替换进去，产生 CMakeList，还能加个格式化

最后发现，不如手写

## editor 构建

最后果然还是使用宏定义来区分编辑器构建和游戏构建比较好

如果是分文件写的话，那么就代表着相关的文件都要写两份，并且这两份都是派生类

很多时候，编辑器相关的行为是需要嵌入到 runtime 的类里面的

所以不得不用派生类重写相关的逻辑

就，更加难以组织文件了

宏的话，劣势主要是，不同的逻辑流写在同一个文件里面

但是方便写

果然还是写宏吧？
